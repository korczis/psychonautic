<!DOCTYPE html>
<html lang="cs" x-data="app()" :class="{ 'dark': darkMode }">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="{% block description %}{{ config.description | default(value='Psychonautics Encyclopedia') }}{% endblock %}">

    <!-- OpenGraph -->
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="{{ config.title }}">
    <meta property="og:title" content="{% block og_title %}{{ config.title }}{% endblock %}">
    <meta property="og:description" content="{% block og_description %}{{ config.description | default(value='Komplexní česká encyklopedie psychoaktivních látek') }}{% endblock %}">
    <meta property="og:locale" content="cs_CZ">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">

    {% if config.extra.favicon %}
    <link rel="icon" href="{{ get_url(path=config.extra.favicon) | safe }}">
    {% endif %}

    <title>{% block title %}{{ config.title }}{% endblock %}</title>

    <!-- Styles -->
    <!-- Flowbite CSS for advanced components -->
    <link href="https://cdn.jsdelivr.net/npm/flowbite@2.2.1/dist/flowbite.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="{{ get_url(path='css/main.css') | safe }}">

    <!-- Alpine.js -->
    <script defer src="{{ get_url(path='js/alpine.min.js') | safe }}"></script>
    <script defer src="{{ get_url(path='js/app.js') | safe }}"></script>
    <script defer src="{{ get_url(path='js/sortable-table.js') | safe }}"></script>

    <!-- Prevent dark mode flash -->
    <script>
        (function() {
            var darkMode = localStorage.getItem('darkMode');
            if (darkMode === 'true' || (darkMode === null && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.documentElement.classList.add('dark');
                document.body && document.body.classList.add('dark');
            }
        })();
    </script>
</head>
<body class="antialiased" :class="darkMode ? 'dark' : ''">
    {% block body %}{% endblock %}

    {% if config.build_search_index %}
    <script src="{{ get_url(path='elasticlunr.min.js') | safe }}" defer></script>
    <script src="{{ get_url(path='search_index.en.js') | safe }}" defer></script>
    <script src="{{ get_url(path='js/search.js') | safe }}" defer></script>
    {% endif %}

    <!-- Flowbite JavaScript for advanced components -->
    <script src="https://cdn.jsdelivr.net/npm/flowbite@2.2.1/dist/flowbite.min.js"></script>

    <!-- Mermaid.js diagram rendering (loads library on-demand from CDN) -->
    <script src="{{ get_url(path='js/mermaid-init.js') | safe }}" defer></script>
</body>
</html>
