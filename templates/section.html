{% extends "index.html" %}

{% block title %} {{ config.title }} | {{ section.title }} {% endblock title %}

{% block description %}{{ section.description | default(value='Psychonautics Encyclopedia - ' ~ section.title) }}{% endblock description %}

{% block og_title %}{{ section.title }} | {{ config.title }}{% endblock og_title %}
{% block og_description %}{{ section.description | default(value='Sekce ' ~ section.title ~ ' - Psychonautics Encyclopedia') }}{% endblock og_description %}
{% block og_url %}{{ section.permalink }}{% endblock og_url %}
{% block og_image %}{% if section.extra.og_image %}{{ get_url(path=section.extra.og_image) | safe }}{% else %}{{ get_url(path='images/og-default.png') | safe }}{% endif %}{% endblock og_image %}

{% block twitter_title %}{{ section.title }} | {{ config.title }}{% endblock twitter_title %}
{% block twitter_description %}{{ section.description | default(value='Sekce ' ~ section.title ~ ' - Psychonautics Encyclopedia') }}{% endblock twitter_description %}
{% block twitter_image %}{% if section.extra.og_image %}{{ get_url(path=section.extra.og_image) | safe }}{% else %}{{ get_url(path='images/og-default.png') | safe }}{% endif %}{% endblock twitter_image %}

{% block canonical %}{{ section.permalink }}{% endblock canonical %}

{% block content %}
    {% if section.word_count > 0 -%}
        {{ section.content | safe }}
    {% else -%}
        <h2 class="title text-3xl font-bold mb-8 gradient-header"> {{ section.title }} </h2>

        {% if section.subsections -%}
            <div class="mb-8">
                <h3 class="text-xl font-semibold mb-4 text-gray-700 dark:text-gray-300">Podsekce</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    {% for subsec in section.subsections -%}
                        {% set sec_ = get_section(path=subsec) -%}
                        <a href="{{ sec_.permalink | safe }}{{ _ugly_url }}"
                           class="block p-4 rounded-lg border border-gray-200 dark:border-slate-700 hover:border-primary-500 dark:hover:border-primary-500 bg-white dark:bg-slate-800 hover:shadow-lg transition-all">
                            <span class="font-medium text-gray-800 dark:text-gray-200">{{ sec_.title }}</span>
                            {% if sec_.description -%}
                                <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">{{ sec_.description }}</p>
                            {% endif -%}
                        </a>
                    {% endfor %}
                </div>
            </div>
        {% endif -%}

        {% if section.pages -%}
            <div>
                <h3 class="text-xl font-semibold mb-4 text-gray-700 dark:text-gray-300">Stránky</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    {% for page in section.pages -%}
                        <a href="{{ page.permalink | safe }}{{ _ugly_url }}"
                           class="block p-4 rounded-lg border border-gray-200 dark:border-slate-700 hover:border-primary-500 dark:hover:border-primary-500 bg-white dark:bg-slate-800 hover:shadow-lg transition-all group">
                            <span class="font-medium text-gray-800 dark:text-gray-200 group-hover:text-primary-600 dark:group-hover:text-primary-400">{{ page.title }}</span>
                            {% if page.description -%}
                                <p class="text-sm text-gray-500 dark:text-gray-400 mt-1 line-clamp-2">{{ page.description }}</p>
                            {% endif -%}
                        </a>
                    {% endfor -%}
                </div>
            </div>
        {% else -%}
            <p class="text-gray-500 dark:text-gray-400 italic">Zatím žádné stránky</p>
        {% endif %}
    {% endif -%}
{% endblock content %}
